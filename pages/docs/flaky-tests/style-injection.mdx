---
title: Style injection
section: Flaky tests
slug: /docs/flaky-tests/style-injection
order: 2
---

# Style injection

How to inject style before screenshots.

```js
/**
 * Inject styles to hide elements and fix unstable rendering.
 * @param {*} document
 */
function injectStyles(document) {
  const cssText = `
  /* Hide carets */
  * { caret-color: transparent !important; }

  /* Hide scrollbars */
  ::-webkit-scrollbar {
    display: none !important;
  }

  /* Generic hide */
  [data-test-hidden] {
    color: transparent !important;
    font-family: monospace !important;
  }

  /* Generic hide */
  [data-test-no-radius] {
    border-radius: 0 !important;
  }
  `
  const css = document.createElement('style')
  css.type = 'text/css'
  css.textContent = cssText
  document.body.appendChild(css)
}

// -- Argos command --
Cypress.Commands.add('argosScreenshot', (name, options = {}) => {
  // Ensure that all existing loaders are hidden
  cy.ensureNoBusy()
  cy.document().then((doc) => injectStyles(doc))
  cy.document().its('fonts.status').should('equal', 'loaded')
  cy.screenshot(name, { capture: 'viewport', ...options })
})
```
